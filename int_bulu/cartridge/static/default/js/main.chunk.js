(this["webpackJsonpgnc-samplechoice"]=this["webpackJsonpgnc-samplechoice"]||[]).push([[0],{182:function(e,t,a){e.exports=a(422)},19:function(e,t,a){e.exports={ChoiceColumn:"SampleChoice_ChoiceColumn__1yc_n",Subtitle:"SampleChoice_Subtitle___l3H1",SampleColumn:"SampleChoice_SampleColumn__16Rys",SampleButton:"SampleChoice_SampleButton__3Y8xd",SampleImageContainer:"SampleChoice_SampleImageContainer__1dwyf",SampleImage:"SampleChoice_SampleImage__3p-Fk",SampleName:"SampleChoice_SampleName__3nWZ7",SampleDescription:"SampleChoice_SampleDescription__3OD1B",SampleOutOfStock:"SampleChoice_SampleOutOfStock__10cah",LoadingImage:"SampleChoice_LoadingImage__3khdl",ImageColumn:"SampleChoice_ImageColumn__36ZDi"}},422:function(e,t,a){"use strict";a.r(t);a(183),a(231);var o=a(1),n=a.n(o),c=a(66),l=a.n(c),s=a(86),i=a(48),r=a.n(i),m=a(87),d=a(180),u=a(181),p=a(6),h=(a(154),"localhost"===window.location.hostname||"gnc.staging.bulubox.com"===window.location.hostname?"https://gnc-dev.bulubox.com/choice/":"/on/demandware.store/Sites-GNC-Site/default/Bulu-Connect"),S=function(){function e(){var t=this;Object(d.a)(this,e),this.dataLoaded=!1,this.dataLoading=!1,this.month=null,this.choices=[],this.selected=0,this.post=function(){var e=Object(m.a)(r.a.mark((function e(a){var o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={customer_id:t.customerId,box_type:t.type,date:t.date,id:t.selected},e.next=3,fetch(h,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){return e.json()})).catch(console.log);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateChoice=function(){var e=Object(m.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a!==t.selected){e.next=2;break}return e.abrupt("return");case 2:t.set("selected",a),t.post(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.loadChoices=Object(m.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.set("dataLoading",!0),t.set("dataLoaded",!1),t.set("selected",0),void 0!==window.user){e.next=7;break}setTimeout(t.loadChoices,100),e.next=13;break;case 7:return e.next=9,t.post();case 9:(a=e.sent).samples&&a.month&&(t.set("month",a.month),t.set("choices",a.samples),a.selected&&t.set("selected",a.selected)),t.set("dataLoaded",!0),t.set("dataLoading",!1);case 13:case"end":return e.stop()}}),e)})))}return Object(u.a)(e,[{key:"set",value:function(e,t){this[e]=t}},{key:"customerId",get:function(){return window.user.loyaltyID}},{key:"date",get:function(){return void 0!==window.expirationDate?window.expirationDate:"2020-05-28"}},{key:"type",get:function(){var e=1;try{e=document.querySelectorAll("input[name=probox]:checked")[0].value}catch(t){}return e}},{key:"canChoose",get:function(){return this.dataLoaded&&this.choices.length>0}}]),e}();Object(p.h)(S,{dataLoaded:p.m,dataLoading:p.m,month:p.m,choices:p.m,selected:p.m,type:p.e,customerId:p.e,date:p.e,canChoose:p.e,set:p.d,get:p.d,updateChoice:p.d,loadChoices:p.d});var b=Object(o.createContext)(new S),C=a(19),f=Object(s.a)((function(e){var t=Object(o.useContext)(b),a=e.sample;return n.a.createElement("div",{className:C.SampleColumn},n.a.createElement("div",{className:[C.SampleButton,t.selected===a.id?C.SampleSelected:"",a.inStock?"":C.SampleOutOfStock].join(" "),key:a.id,onClick:function(){a.inStock&&t.updateChoice(a.id)}},n.a.createElement("div",{className:C.SampleImageContainer},n.a.createElement("img",{className:C.SampleImage,src:a.img,alt:a.name})),n.a.createElement("p",{className:C.SampleName},a.name),a.inStock&&n.a.createElement("div",null,n.a.createElement("input",{id:a.id,className:"input-radio",type:"radio",name:"sample",value:a.id,checked:t.selected===a.id,readOnly:!0}),n.a.createElement("label",{htmlFor:a.id}),n.a.createElement("p",{className:C.SampleDescription},a.description)),!a.inStock&&n.a.createElement("p",{className:C.SampleName,style:{color:"#e31837"}},"Out of Stock")))})),g=Object(s.a)((function(){for(var e=Object(o.useContext)(b),t=document.getElementsByName("probox"),a=0;a<t.length;a++)t[a].addEventListener("change",e.loadChoices);return e.dataLoaded||e.dataLoading||e.loadChoices(),n.a.createElement("div",null,n.a.createElement("div",{className:C.ImageColumn},n.a.createElement("label",null,(!e.dataLoaded||e.canChoose)&&n.a.createElement("span",null,"Choose Your Sample"),e.dataLoaded&&!e.canChoose&&n.a.createElement("span",null,"Check Back Later")),e.canChoose&&n.a.createElement("div",null,n.a.createElement("p",{className:C.Subtitle},"Choose a sample for your ",e.month," box.*"),n.a.createElement("p",{className:C.Subtitle},"Your sample choice will be recorded each time you click on a radio button."),n.a.createElement("p",{className:C.Subtitle},"The other samples in your PRO Box will be chosen for you based on your selected box type.")),e.dataLoaded&&!e.canChoose&&n.a.createElement("p",{className:C.Subtitle},"It\u2019s not currently your time to select a sample for your box, but stay tuned - the ability to choose a sample for your box is available the month prior to your scheduled box shipment")),n.a.createElement("div",{className:C.ChoiceColumn},!e.dataLoaded&&n.a.createElement("img",{className:C.LoadingImage,src:"https://assets.bulubox.com/loading.gif",alt:"loading",width:"100"}),e.dataLoaded&&e.canChoose&&n.a.createElement("div",null,n.a.createElement("div",null,e.choices.map((function(e){return n.a.createElement(f,{sample:e,key:e.id})}))))),e.canChoose&&n.a.createElement("p",{style:{fontSize:"12px",marginBottom:0}},"*Sample selections are subject to availability."),n.a.createElement("script",{src:"https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.6.15/browser-polyfill.min.js"}))}));l.a.render(n.a.createElement(g,null),document.getElementById("sample-choice"))}},[[182,1,2]]]);
//# sourceMappingURL=main.118ee241.chunk.js.map